!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.InfiniteLoading=e(require("react")):t.InfiniteLoading=e(t.react)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,n){"use strict";function i(t,e,n,i,o,s,a,u){if(r(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,o,s,a,u],p=0;c=new Error(e.replace(/%s/g,function(){return l[p++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var r=function(t){};t.exports=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":o(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=n(8),a=function(t){function e(n,r,o){i(this,e),t.call(this,n),this.listener=r,this.context=o}return r(e,t),e}(s);t.exports=a},function(t,e,n){"use strict";function i(t){return function(){return t}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(t){return t},t.exports=r},function(t,e,n){var i={EventEmitter:n(7),EmitterSubscription:n(1)};t.exports=i},function(t,e,n){"function"==typeof Symbol&&Symbol.iterator;t.exports=n(10)()},function(e,n){e.exports=t},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"EventEmitter",function(){return f}),n.d(e,"emitter",function(){return d}),n.d(e,"TYPE",function(){return h});var s=n(3),a=(n.n(s),n(5)),u=n.n(a),c=n(4),l=n.n(c),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),f=s.EventEmitter,d=new f,h={INIT_LOADING:"IL_INIT_LOADING",LOADING:"  IL_LOADING",ALL_LOADED:"IL_ALL_LOADED",LOADING_FINISHED:"IL_LOADING_FINISHED",REINITIALIZE:"IL_REINITIALIZE"},y=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.scrollHandler=n.scrollHandler.bind(n),n.initHandler=n.initHandler.bind(n),n.clear=n.clear.bind(n),n.destroy=n.destroy.bind(n),n.reInitHandler=n.reInitHandler.bind(n),n.toggleLoadingDone=n.toggleLoadingDone.bind(n),n.initialLoad=n.props.initialLoad,n.emitter=n.props.emitter||d,n.state={loadingDone:!1},n}return o(e,t),p(e,[{key:"componentDidMount",value:function(){var t=this;this.initHandler(),this.reInitializeListener=this.emitter.addListener(h.REINITIALIZE,function(e){t.toggleLoadingDone(!1),t.reInitHandler(),e&&e()})}},{key:"componentWillUnmount",value:function(){this.clear(),this.destroy(),this.reInitializeListener.remove()}},{key:"reInitHandler",value:function(){this.clear(),this.destroy(),this.log("reinitialize loading..."),this.initHandler()}},{key:"initHandler",value:function(){var t=this;this.screenHeight=window.screen.availHeight,this.loading=!1,this.scale=1,this.offset=this.props.offset,this.delay=this.props.delay,this.allLoaded=!1,this.loadingFinishedListerner=this.emitter.addListener(h.LOADING_FINISHED,function(){t.loading=!1,t.log("loading done...")}),this.allLoadedListener=this.emitter.addListener(h.ALL_LOADED,function(){t.clear(),t.toggleLoadingDone(!0),t.log("all loaded...")}),window.addEventListener("scroll",this.scrollHandler,!1),this.initialLoad&&setTimeout(function(){t.log("init loading..."),t.toggleLoadingDone(!1),t.emitter.emit(h.INIT_LOADING)},this.delay)}},{key:"clear",value:function(){this.allLoaded=!0,this.loading=!1,window.removeEventListener("scroll",this.scrollHandler,!1)}},{key:"destroy",value:function(){this.loadingFinishedListerner.remove(),this.allLoadedListener.remove(),clearTimeout(this.waitTimer)}},{key:"scrollHandler",value:function(){var t=this;if(!this.loading&&!this.allLoaded){var e=this.loadingDom.getBoundingClientRect();this.screenHeight-e.bottom*this.scale>=this.offset&&(this.loading=!0,this.waitTimer=setTimeout(function(){t.log("loading..."),t.toggleLoadingDone(!1),t.emitter.emit(h.LOADING)},this.delay))}}},{key:"toggleLoadingDone",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({loadingDone:t})}},{key:"log",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"render",value:function(){var t=this,e={display:this.state.loadingDone?"none":"block"},n=this.props.className?" "+this.props.className:"";return u.a.createElement("div",{className:"infinite-loading"+n,style:e,ref:function(e){return t.loadingDom=e}},this.props.loader||this.props.children||"Loading...")}}]),e}(u.a.Component);y.defaultProps={offset:0,delay:0,initialLoad:!0},y.propTypes={className:l.a.string,offset:l.a.number,delay:l.a.number,initialLoad:l.a.bool,emitter:l.a.instanceOf(f),loader:l.a.oneOfType([l.a.string,l.a.node,l.a.element])},e.default=y},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(1),o=n(9),s=n(2),a=n(0),u=function(){function t(){i(this,t),this._subscriber=new o,this._currentSubscription=null}return t.prototype.addListener=function(t,e,n){return this._subscriber.addSubscription(t,new r(this._subscriber,e,n))},t.prototype.once=function(t,e,n){var i=this;return this.addListener(t,function(){i.removeCurrentListener(),e.apply(n,arguments)})},t.prototype.removeAllListeners=function(t){this._subscriber.removeAllSubscriptions(t)},t.prototype.removeCurrentListener=function(){this._currentSubscription||a(!1),this._subscriber.removeSubscription(this._currentSubscription)},t.prototype.listeners=function(t){var e=this._subscriber.getSubscriptionsForType(t);return e?e.filter(s.thatReturnsTrue).map(function(t){return t.listener}):[]},t.prototype.emit=function(t){var e=this._subscriber.getSubscriptionsForType(t);if(e){for(var n=Object.keys(e),i=0;i<n.length;i++){var r=n[i],o=e[r];o&&(this._currentSubscription=o,this.__emitToSubscription.apply(this,[o].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},t.prototype.__emitToSubscription=function(t,e){var n=Array.prototype.slice.call(arguments,2);t.listener.apply(t.context,n)},t}();t.exports=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(e){i(this,t),this.subscriber=e}return t.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},t}();t.exports=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=n(0),o=function(){function t(){i(this,t),this._subscriptionsForType={},this._currentSubscription=null}return t.prototype.addSubscription=function(t,e){e.subscriber!==this&&r(!1),this._subscriptionsForType[t]||(this._subscriptionsForType[t]=[]);var n=this._subscriptionsForType[t].length;return this._subscriptionsForType[t].push(e),e.eventType=t,e.key=n,e},t.prototype.removeAllSubscriptions=function(t){void 0===t?this._subscriptionsForType={}:delete this._subscriptionsForType[t]},t.prototype.removeSubscription=function(t){var e=t.eventType,n=t.key,i=this._subscriptionsForType[e];i&&delete i[n]},t.prototype.getSubscriptionsForType=function(t){return this._subscriptionsForType[t]},t}();t.exports=o},function(t,e,n){"use strict";var i=n(2),r=n(0),o=n(11);t.exports=function(){function t(t,e,n,i,s,a){a!==o&&r(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}])});
//# sourceMappingURL=react-infinite-loading.min.js.map